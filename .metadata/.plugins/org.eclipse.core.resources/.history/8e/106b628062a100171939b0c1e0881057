package funkemunky.Daedalus.check.combat;

import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;

import com.comphenix.protocol.wrappers.EnumWrappers.EntityUseAction;

import funkemunky.Daedalus.Daedalus;
import funkemunky.Daedalus.check.Check;
import funkemunky.Daedalus.packets.events.PacketUseEntityEvent;
import funkemunky.Daedalus.utils.Chance;
import funkemunky.Daedalus.utils.UtilCheat;

public class HitBoxes extends Check {
	
	public HitBoxes(Daedalus Daedalus) {
		super("HitBoxes", "Hitboxes", Daedalus);
	}
	
	@EventHandler
	public void onUse(PacketUseEntityEvent e) {
		if(e.getAction() == EntityUseAction.INTERACT) {
			return;
		}
		if(!(e.getAttacker() instanceof Player)) {
			return;
		}
	    Player player = e.getAttacker();
	    Player attacked = (Player) e.getAttacked();
	    
	    double offset = UtilCheat.getOffsetOffCursor(player, attacked);
	    double Limit = 0.5D;
	    
	    if(offset > Limit) {
	    	getDaedalus().logCheat(this, player, offset + " offset", Chance.LIKELY, new String[0]);
	    }
	}

}
